const PORT = 3000;
var express = require('express');
var app = express();
var superagent = require('superagent');
var http  = require('http');
var server = http.createServer(app);
const EPL_URL = 'http://api.football-data.org/v1/competitions/426/leagueTable';

app.set('view engine', 'ejs');
app.use(express.static(__dirname + '/public'));

app.get('/', function(req, res) {
  // superagent.get(EPL_URL, function(getErr, getRes){
      // let eplData = JSON.parse(getRes.text);


      let eplData = {"_links":{"self":{"href":"http://api.football-data.org/v1/competitions/426/leagueTable/?matchday=23"},"competition":{"href":"http://api.football-data.org/v1/competitions/426"}},"leagueCaption":"Premier League 2016/17","matchday":23,"standing":[{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/61"}},"position":1,"teamName":"Chelsea FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/5/5c/Chelsea_crest.svg","playedGames":22,"points":55,"goals":47,"goalsAgainst":15,"goalDifference":32,"wins":18,"draws":1,"losses":3,"home":{"goals":30,"goalsAgainst":6,"wins":10,"draws":0,"losses":1},"away":{"goals":17,"goalsAgainst":9,"wins":8,"draws":1,"losses":2}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/57"}},"position":2,"teamName":"Arsenal FC","crestURI":"http://upload.wikimedia.org/wikipedia/en/5/53/Arsenal_FC.svg","playedGames":22,"points":47,"goals":50,"goalsAgainst":23,"goalDifference":27,"wins":14,"draws":5,"losses":3,"home":{"goals":23,"goalsAgainst":11,"wins":8,"draws":2,"losses":1},"away":{"goals":27,"goalsAgainst":12,"wins":6,"draws":3,"losses":2}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/73"}},"position":3,"teamName":"Tottenham Hotspur FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/b/b4/Tottenham_Hotspur.svg","playedGames":22,"points":46,"goals":45,"goalsAgainst":16,"goalDifference":29,"wins":13,"draws":7,"losses":2,"home":{"goals":25,"goalsAgainst":5,"wins":9,"draws":2,"losses":0},"away":{"goals":20,"goalsAgainst":11,"wins":4,"draws":5,"losses":2}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/64"}},"position":4,"teamName":"Liverpool FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/0/0a/FC_Liverpool.svg","playedGames":22,"points":45,"goals":51,"goalsAgainst":27,"goalDifference":24,"wins":13,"draws":6,"losses":3,"home":{"goals":28,"goalsAgainst":10,"wins":7,"draws":2,"losses":1},"away":{"goals":23,"goalsAgainst":17,"wins":6,"draws":4,"losses":2}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/65"}},"position":5,"teamName":"Manchester City FC","crestURI":"https://upload.wikimedia.org/wikipedia/en/e/eb/Manchester_City_FC_badge.svg","playedGames":22,"points":43,"goals":43,"goalsAgainst":28,"goalDifference":15,"wins":13,"draws":4,"losses":5,"home":{"goals":21,"goalsAgainst":12,"wins":6,"draws":4,"losses":1},"away":{"goals":22,"goalsAgainst":16,"wins":7,"draws":0,"losses":4}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/66"}},"position":6,"teamName":"Manchester United FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/d/da/Manchester_United_FC.svg","playedGames":22,"points":41,"goals":33,"goalsAgainst":21,"goalDifference":12,"wins":11,"draws":8,"losses":3,"home":{"goals":17,"goalsAgainst":9,"wins":5,"draws":5,"losses":1},"away":{"goals":16,"goalsAgainst":12,"wins":6,"draws":3,"losses":2}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/62"}},"position":7,"teamName":"Everton FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/f/f9/Everton_FC.svg","playedGames":22,"points":36,"goals":33,"goalsAgainst":23,"goalDifference":10,"wins":10,"draws":6,"losses":6,"home":{"goals":19,"goalsAgainst":7,"wins":6,"draws":4,"losses":1},"away":{"goals":14,"goalsAgainst":16,"wins":4,"draws":2,"losses":5}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/74"}},"position":8,"teamName":"West Bromwich Albion FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/8/8b/West_Bromwich_Albion.svg","playedGames":22,"points":32,"goals":30,"goalsAgainst":28,"goalDifference":2,"wins":9,"draws":5,"losses":8,"home":{"goals":21,"goalsAgainst":14,"wins":6,"draws":2,"losses":3},"away":{"goals":9,"goalsAgainst":14,"wins":3,"draws":3,"losses":5}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/70"}},"position":9,"teamName":"Stoke City FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/a/a3/Stoke_City.svg","playedGames":22,"points":28,"goals":28,"goalsAgainst":34,"goalDifference":-6,"wins":7,"draws":7,"losses":8,"home":{"goals":14,"goalsAgainst":14,"wins":4,"draws":4,"losses":3},"away":{"goals":14,"goalsAgainst":20,"wins":3,"draws":3,"losses":5}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/563"}},"position":10,"teamName":"West Ham United FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/e/e0/West_Ham_United_FC.svg","playedGames":22,"points":28,"goals":29,"goalsAgainst":36,"goalDifference":-7,"wins":8,"draws":4,"losses":10,"home":{"goals":12,"goalsAgainst":16,"wins":5,"draws":2,"losses":4},"away":{"goals":17,"goalsAgainst":20,"wins":3,"draws":2,"losses":6}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/340"}},"position":11,"teamName":"Southampton FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/c/c9/FC_Southampton.svg","playedGames":22,"points":27,"goals":22,"goalsAgainst":26,"goalDifference":-4,"wins":7,"draws":6,"losses":9,"home":{"goals":13,"goalsAgainst":11,"wins":5,"draws":3,"losses":3},"away":{"goals":9,"goalsAgainst":15,"wins":2,"draws":3,"losses":6}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/1044"}},"position":12,"teamName":"AFC Bournemouth","crestURI":"https://upload.wikimedia.org/wikipedia/de/4/41/Afc_bournemouth.svg","playedGames":22,"points":26,"goals":32,"goalsAgainst":39,"goalDifference":-7,"wins":7,"draws":5,"losses":10,"home":{"goals":21,"goalsAgainst":17,"wins":5,"draws":3,"losses":3},"away":{"goals":11,"goalsAgainst":22,"wins":2,"draws":2,"losses":7}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/328"}},"position":13,"teamName":"Burnley FC","crestURI":"https://upload.wikimedia.org/wikipedia/en/0/02/Burnley_FC_badge.png","playedGames":22,"points":26,"goals":24,"goalsAgainst":33,"goalDifference":-9,"wins":8,"draws":2,"losses":12,"home":{"goals":20,"goalsAgainst":11,"wins":8,"draws":1,"losses":3},"away":{"goals":4,"goalsAgainst":22,"wins":0,"draws":1,"losses":9}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/346"}},"position":14,"teamName":"Watford FC","crestURI":"https://upload.wikimedia.org/wikipedia/en/e/e2/Watford.svg","playedGames":22,"points":24,"goals":25,"goalsAgainst":38,"goalDifference":-13,"wins":6,"draws":6,"losses":10,"home":{"goals":15,"goalsAgainst":17,"wins":4,"draws":3,"losses":4},"away":{"goals":10,"goalsAgainst":21,"wins":2,"draws":3,"losses":6}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/338"}},"position":15,"teamName":"Leicester City FC","crestURI":"http://upload.wikimedia.org/wikipedia/en/6/63/Leicester02.png","playedGames":22,"points":21,"goals":24,"goalsAgainst":37,"goalDifference":-13,"wins":5,"draws":6,"losses":11,"home":{"goals":16,"goalsAgainst":13,"wins":5,"draws":3,"losses":3},"away":{"goals":8,"goalsAgainst":24,"wins":0,"draws":3,"losses":8}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/343"}},"position":16,"teamName":"Middlesbrough FC","crestURI":"https://upload.wikimedia.org/wikipedia/en/2/2c/Middlesbrough_FC_crest.svg","playedGames":22,"points":20,"goals":18,"goalsAgainst":25,"goalDifference":-7,"wins":4,"draws":8,"losses":10,"home":{"goals":10,"goalsAgainst":13,"wins":3,"draws":2,"losses":6},"away":{"goals":8,"goalsAgainst":12,"wins":1,"draws":6,"losses":4}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/72"}},"position":17,"teamName":"Swansea City FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/a/ab/Swansea_City_Logo.svg","playedGames":22,"points":18,"goals":26,"goalsAgainst":51,"goalDifference":-25,"wins":5,"draws":3,"losses":14,"home":{"goals":14,"goalsAgainst":27,"wins":2,"draws":2,"losses":7},"away":{"goals":12,"goalsAgainst":24,"wins":3,"draws":1,"losses":7}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/354"}},"position":18,"teamName":"Crystal Palace FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/b/bf/Crystal_Palace_F.C._logo_(2013).png","playedGames":22,"points":16,"goals":30,"goalsAgainst":41,"goalDifference":-11,"wins":4,"draws":4,"losses":14,"home":{"goals":13,"goalsAgainst":16,"wins":2,"draws":1,"losses":8},"away":{"goals":17,"goalsAgainst":25,"wins":2,"draws":3,"losses":6}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/322"}},"position":19,"teamName":"Hull City FC","crestURI":"http://upload.wikimedia.org/wikipedia/de/a/a9/Hull_City_AFC.svg","playedGames":22,"points":16,"goals":20,"goalsAgainst":47,"goalDifference":-27,"wins":4,"draws":4,"losses":14,"home":{"goals":14,"goalsAgainst":21,"wins":3,"draws":3,"losses":5},"away":{"goals":6,"goalsAgainst":26,"wins":1,"draws":1,"losses":9}},{"_links":{"team":{"href":"http://api.football-data.org/v1/teams/71"}},"position":20,"teamName":"Sunderland AFC","crestURI":"http://upload.wikimedia.org/wikipedia/de/6/60/AFC_Sunderland.svg","playedGames":22,"points":15,"goals":20,"goalsAgainst":42,"goalDifference":-22,"wins":4,"draws":3,"losses":15,"home":{"goals":14,"goalsAgainst":20,"wins":3,"draws":2,"losses":6},"away":{"goals":6,"goalsAgainst":22,"wins":1,"draws":1,"losses":9}}]};

      console.log(eplData);

      res.render('pages/index', {data: eplData});
    // });
});

server.listen(PORT, 'localhost');
server.on('listening', function () {
  console.log('Example app listening on port %s!', PORT)
});
